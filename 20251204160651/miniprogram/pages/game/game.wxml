<view class="container">
  <!-- 游戏状态检查 -->
  <view class="check-required" wx:if="{{!hasCheckin}}">
    <view class="check-icon">⚠️</view>
    <view class="check-title">需要签到</view>
    <view class="check-desc">请先完成签到才能参与游戏</view>
    <button class="check-btn" bindtap="goToCheckin">去签到</button>
  </view>

  <!-- 游戏主界面 -->
  <view class="game-container" wx:else>
    <!-- 游戏头部信息 -->
    <view class="game-header">
      <view class="game-title">摇一摇竞技</view>
      <view class="game-status">
        <text class="status-text" wx:if="{{gameStatus === 'idle'}}">准备就绪</text>
        <text class="status-text playing" wx:elif="{{gameStatus === 'playing'}}">游戏进行中</text>
        <text class="status-text finished" wx:else>游戏结束</text>
      </view>
    </view>

    <!-- 游戏统计 -->
    <view class="game-stats">
      <view class="stat-item">
        <view class="stat-label">当前得分</view>
        <view class="stat-value current">{{score}}</view>
      </view>
      <view class="stat-item">
        <view class="stat-label">剩余时间</view>
        <view class="stat-value time">{{timeLeft}}s</view>
      </view>
      <view class="stat-item">
        <view class="stat-label">摇动次数</view>
        <view class="stat-value shakes">{{shakeCount}}</view>
      </view>
    </view>

    <!-- 游戏区域 -->
    <view class="game-area">
      <!-- 待开始状态 -->
      <view class="game-idle" wx:if="{{gameStatus === 'idle'}}">
        <view class="idle-icon">📱</view>
        <view class="idle-title">准备摇一摇</view>
        <view class="idle-desc">点击开始按钮，用力摇动手机获得分数</view>
        <button class="start-btn" bindtap="startGame">开始游戏</button>
      </view>

      <!-- 游戏进行中 -->
      <view class="game-playing" wx:elif="{{gameStatus === 'playing'}}">
        <view class="phone-container" animation="{{animationData}}">
          <view class="phone-icon">📱</view>
          <view class="shake-effect {{isShaking ? 'active' : ''}}"></view>
        </view>
        <view class="playing-tips">
          <text class="tip-text">用力摇动手机！</text>
          <text class="tip-sub">摇动越快，得分越高</text>
        </view>
      </view>

      <!-- 游戏结束 -->
      <view class="game-finished" wx:else>
        <view class="result-container">
          <view class="result-icon">🏆</view>
          <view class="result-title">游戏结束</view>
          <view class="result-score">{{maxScore}} 分</view>
          <view class="result-desc">太棒了！继续加油！</view>
        </view>
        
        <view class="result-actions">
          <button class="restart-btn" bindtap="restartGame">再玩一次</button>
          <button class="leaderboard-btn" bindtap="viewLeaderboard">查看排行</button>
        </view>
      </view>
    </view>

    <!-- 游戏说明 -->
    <view class="game-tips">
      <view class="tips-title">游戏规则</view>
      <view class="tips-list">
        <view class="tip-item">📱 游戏时长30秒，摇动手机获得分数</view>
        <view class="tip-item">⚡ 摇动越快，得分越高</view>
        <view class="tip-item">🏆 游戏结束后可查看排行榜</view>
        <view class="tip-item">🎁 高分玩家有机会获得精美礼品</view>
      </view>
    </view>
  </view>
</view>